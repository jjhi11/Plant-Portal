<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta name="description" content="ArcGIS JS v4, Calcite Maps and Bootstrap Example">
 
  <title>Utah Plant Portal</title>

  <!-- Calcite Maps Bootstrap -->
  <link rel="stylesheet" href="https://esri.github.io/calcite-maps/dist/css/calcite-maps-bootstrap.min-v0.10.css">
  <!--link rel="stylesheet" href="http://localhost/GitHub/calcite-maps/dist/css/calcite-maps-bootstrap.min-v0.9.css"-->
  
  <!-- Calcite Maps -->
  <link rel="stylesheet" href="https://esri.github.io/calcite-maps/dist/css/calcite-maps-arcgis-4.x.min-v0.10.css">
  <!--link rel="stylesheet" href="http://localhost/GitHub/calcite-maps/dist/css/calcite-maps-arcgis-4.x.min-v0.9.css"-->

  <!-- ArcGIS JS 4 -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.13/esri/css/main.css">

  <!-- dgrid styling-->
  <!-- <link rel="stylesheet" type="text/css" href="https://github.com/SitePen/dgrid/blob/master/css/dgrid.css" /> -->
  <link rel="stylesheet" href="awesomplete.css" />

  <style>
    html,
    body,
    #mapViewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
    }

/* unvisited link */
a:link {
  color: blue;
}

/* visited link */
a:visited {
  color: orange;
}

/* mouse over link */
a:hover {
  color: hotpink;
}

/* selected link */
a:active {
  color: blue;
}



    .esri-feature__content-element {
        padding: 0 0 0 0;
    }

    .esri-popup__inline-actions-container>.esri-popup__action, .esri-popup__inline-actions-container>.esri-popup__action-toggle {
    margin: 0 7px;
    max-width: 100%;
}

.esri-popup__inline-actions-container:only-child>.esri-popup__action, .esri-popup__inline-actions-container:only-child>.esri-popup__action-toggle {
    max-width: 100%;
}

    /* .dds {
      position: absolute;
      display: inline-block;
    } */

  .button2 {

    /* top: 21%;
    left: 1%;
    position: absolute; */
      display: inline-block;
  }

  .dgrid {
      height: 250px;
  }

  .calcite-panels .panel-body {
      overflow-x: auto;
  }

  #mapViewDiv.withGrid {
      height: 65%;
    }  

    #gridDisplay {
      position: absolute;
      bottom: 0;
      left: 0;
      height: auto;
      background-color: white;
      border-color: grey;
      width: 100%;
      font-family: "Avenir Next W00", "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 14px;
      display: none;
    }

    .esri-layer-list__item-actions-menu-item--active, .esri-layer-list__item-actions-menu-item--active:hover {
    background-color: #ffffff;
}

    #gridDisplay {
      z-index: 80;
    }

    .info {
        line-height: 20px;
      padding-left: 5px ! important;
      z-index: 90;
      font-size: 16px;
      padding-left: 20px;
    }

    /* #info * {
      padding-right: 20px;
    } */



    .dgrid-header,
    .dgrid-header-row {
      background-color: #eee;
      color: #57585A;
    }

    .dgrid-row-even {
      background-color: #F7F8F8;
    }

    .dgrid-row-odd {
      background-color: #EFEFEF;
    }

    .dgrid-selected {
      background: #B4DAF5;
    }

    .dgrid-row {
      border: none
    }



  </style>

</head>

<body class="calcite-maps calcite-nav-top">
  <!-- Navbar -->

  <nav class="navbar calcite-navbar navbar-fixed-top calcite-text-light calcite-bg-dark">
    <!-- Menu -->
    <div class="dropdown calcite-dropdown calcite-text-dark calcite-bg-light" role="presentation">
      <a class="dropdown-toggle" role="menubutton" aria-haspopup="true" aria-expanded="false" tabindex="0">
        <div class="calcite-dropdown-toggle">
          <span class="sr-only">Toggle dropdown menu</span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>
      </a>
      <ul class="dropdown-menu" role="menu">
        <li><a role="menuitem" tabindex="0" data-target="#panelInfo" aria-haspopup="true"><span class="glyphicon glyphicon-info-sign"></span> About</a></li>
        <li><a role="menuitem" tabindex="0" href="#" data-target="#panelBasemaps" aria-haspopup="true"><span class="esri-icon-basemap"></span> Basemaps</a></li>
        <li><a role="menuitem" tabindex="0" href="#" data-target="#panelLegend" aria-haspopup="true"><span class="glyphicon glyphicon-list-alt"></span> Legend</a></li>
        <li><a role="menuitem" tabindex="0" href="#" data-target="#panelQuery" aria-haspopup="true"><span class="esri-icon-filter"></span> Query Sites</a></li>
        <li><a role="menuitem" tabindex="0" href="#" data-target="#panelQuerySpecies" aria-haspopup="true"><span class="esri-icon-filter"></span> Query Species</a></li>
        <li><a role="menuitem" tabindex="0" href="#" id="calciteToggleNavbar" aria-haspopup="true"><span class="glyphicon glyphicon-fullscreen"></span> Full Map</a></li>
      </ul>
    </div>
    <!-- Title -->
    <div class="calcite-title calcite-overflow-hidden">
        <span class="calcite-title-main">Utah Geological Survey</span>
        <span class="calcite-title-divider hidden-xs"></span>
        <span class="calcite-title-sub hidden-xs">Plant Portal</span>
    </div>
    <!-- Nav -->
    <ul class="nav navbar-nav calcite-nav">
      <li>
        <div class="calcite-navbar-search calcite-search-expander">
          <div id="searchWidgetDiv"></div>
        </div>
      </li>
    </ul>
  </nav>

  <!--/.calcite-navbar -->

  <!-- Map  -->

  <div class="calcite-map calcite-map-absolute">
    <div id="mapViewDiv">  

        <div id="gridDisplay">
            <span class="info" id="featureCount"></span>
            <div id="downloadX"></div>
            <!-- <span class="downloadX" id ="downloadCSV"></span> -->
            <div id='removeX'></div>
            <div id="grid"></div>
          </div>
        </div>
        <div
        id="select-by-polygon"
        class="esri-widget esri-widget--button esri-widget esri-interactive"
        title="Select features by polygon"
      >
        <span class="esri-icon-checkbox-unchecked"></span>
      </div>
  </div>



  <!-- /.calcite-map -->
  


  <!-- Panels -->

  <div class="calcite-panels calcite-panels-right calcite-text-light calcite-bg-dark panel-group">

    <!-- Panel - Info -->

    <div id="panelInfo" class="panel collapse in">
      <div id="headingInfo" class="panel-heading" role="tab">
        <div class="panel-title">
          <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseInfo"  aria-expanded="true" aria-controls="collapseInfo"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span><span class="panel-label">About</span></a> 
          <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelInfo"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
        </div>
      </div>
      <div id="collapseInfo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingInfo">
        <div class="panel-body">
          <p style="text-align: justify;"><span style="font-weight: 400;">The Wetland Plant Application is a tool that allows users to query, view, and download plant community composition data from Utah&rsquo;s wetlands. Some potential uses of the data include evaluating threats posed by noxious weed species, developing watershed-based species lists to ensure that regionally appropriate species are used in restoration activities, and identifying reference sites to use when setting mitigation standards. Data can also be used to support research on Utah&rsquo;s wetlands to better understand these systems.</span></p>
<p style="text-align: justify;">Each site is linked to a list of plant species observed at the site with associated percent cover, using scientific and common names from <a href="https://plants.sc.egov.usda.gov" target="_blank">USDA Plants</a>. Plant data were collected by multiple organizations using a variety of methods. Wetlands for the sake of this application include any system considered to be wetland by the contributing organizations and include features such as aquatic beds and unvegetated mudflats and playas that would not meet the U.S. Army Corps of Engineers definition of wetland. Some privately owned sites are only discoverable through queries. These sites are not visible on the map, but do show up in query results. If you click on one of these sites in the table, you will be taken to a random location within the vicinity of the actual site. While only data from reputable sources was included in this application, we make no guarantees about the accuracy of plant identification.</p>
<p style="text-align: justify;"><span style="font-weight: 400;">There are three main ways to query data in the application. First, you can click on individual sites to see site attributes and associated plant species. Second, you can query by species to see a list of sites where a particular species was found. Last, you can query by site attributes to either obtain a list of sites with those attributes or a summary list of all species found at sites with those attributes. Data can be queried by major ecoregion, </span><a href="https://docs.google.com/document/d/1M1BZ4K61fVmA9pe_NB7IEg-J8TWVSC86x0PnlNFYAic/edit?ts=5dc5eaea#heading=h.m83qorel3w3l"><span style="font-weight: 400;">wetland class</span></a><span style="font-weight: 400;">, watershed, and </span><a href="https://docs.google.com/document/d/1M1BZ4K61fVmA9pe_NB7IEg-J8TWVSC86x0PnlNFYAic/edit?ts=5dc5eaea#heading=h.1vtndqsngase"><span style="font-weight: 400;">condition class</span></a><span style="font-weight: 400;">. For example, you could obtain a list of all playa wetlands in the Jordan watershed that were considered reference condition or you could obtain a list of all species known from wet meadows in montane valleys.</span></p>
<p style="text-align: justify;"><span style="font-weight: 400;">Please contact </span><a href="mailto:dmenuz@utah.gov"><span style="font-weight: 400;">Diane Menuz</span></a><span style="font-weight: 400;"> (801.538.7436) with questions or if you are interested in contributing data.</span></p>
        </div>
     </div>
    </div>

            <!-- Basemaps Panel -->
            <div id="panelBasemaps" class="panel collapse">
                <div id="headingBasemaps" class="panel-heading" role="tab">
                    <div class="panel-title">
                        <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseBasemaps" aria-expanded="false" aria-controls="collapseBasemaps"><span class="glyphicon glyphicon-th-large" aria-hidden="true"></span><span class="panel-label">Basemaps</span></a>
                        <a class="panel-close" role="button" data-toggle="collapse" data-target="#panelBasemaps"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>
                    </div>
                </div>
                <div id="collapseBasemaps" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingBasemaps">
                    <div class="panel-body">
                        <select id="selectBasemapPanel" class="form-control">
                            <option value="streets" data-vector="streets-vector">Streets</option>
                            <option value="satellite" data-vector="satellite" selected="">Satellite</option>
                            <option value="hybrid" data-vector="hybrid">Hybrid</option>
                            <option value="national-geographic" data-vector="national-geographic">National Geographic</option>
                            <option value="topo" data-vector="topo-vector">Topographic</option>
                            <option value="gray" data-vector="gray-vector">Gray</option>
                            <option value="dark-gray" data-vector="dark-gray-vector">Dark Gray</option>
                            <option value="osm" data-vector="osm">Open Street Map</option>
                            <option value="dark-gray" data-vector="streets-night-vector">Streets Night</option>
                            <option value="streets" data-vector="streets-navigation-vector">Streets Mobile</option>
                        </select>
                    </div>
                </div>
            </div>



        <!-- Panel - Query Sites -->

        <div id="panelQuery" class="panel collapse">
          <div id="headingQuery" class="panel-heading" role="tab">
            <div class="panel-title">
              <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseQuery"  aria-expanded="false" aria-controls="collapseQuery"><span class="esri-icon esri-icon-filter" aria-hidden="true"></span><span class="panel-label">Query Sites</span></a> 
              <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelQuery"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
            </div>
          </div>
          <div id="collapseQuery" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingQuery">
            <div class="panel-body">
              <!-- <div class="dds"> -->
                Select Ecoregional Group
                <br><select id="ecoLevel"></select>
                <br>Select Wetland Type
                <br><select id="wetlandType"><option selected>All</option></select>
                <br>Select Watershed (HUC8)
                <br><select id="waterShed"><option selected>All</option></select>
                <!-- <br>Select HGM Class
                <br><select id="hgmClass"><option selected>All</option></select> -->
                <br>Select Wetland Condition
                <br><select id="wetlandCondition"><option selected>All</option></select>
                <!-- </div> -->
                <br>
                <br><span class="info2" id="featureCount2"></span>
                <br><button class="button2" id="queryFunction">Open Table</button>
                <button class="button2" id="clrButton">Clear</button>
                <button class="button2" id="speciesSummary">Summary of Species</button>


            </div>
         </div>
        </div>


     <!-- Panel - Query Species -->

     <div id="panelQuerySpecies" class="panel collapse">
        <div id="headingQuerySpecies" class="panel-heading" role="tab">
          <div class="panel-title">
            <a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseQuerySpecies"  aria-expanded="false" aria-controls="collapseQuerySpecies"><span class="esri-icon esri-icon-filter" aria-hidden="true"></span><span class="panel-label">Query Species</span></a> 
            <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelQuerySpecies"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
          </div>
        </div>
        <div id="collapseQuerySpecies" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingQuery">
          <div class="panel-body">
            <!-- <div class="dds"> -->
              <!-- <br><select id="speciesName"></select> -->
              <br>Species Scientific Name: <input class="awesomplete" type="text" id="speciesText">
              <br>
              <br><button class="button2" id="querySpeciesFunction">Show Sites</button>
              <button class="button2" id="clrSpeciesButton">Clear</button>
              <br>

          </div>
       </div>
      </div>   


    <!-- Panel - Legend -->

    <div id="panelLegend" class="panel collapse">
      <div id="headingLegend" class="panel-heading" role="tab">
        <div class="panel-title">
          <a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseLegend" aria-expanded="false" aria-controls="collapseLegend"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span><span class="panel-label">Legend</span></a> 
          <a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelLegend"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a> 
        </div>
      </div>
      <div id="collapseLegend" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingLegend">
        <div class="panel-body">            
          <div id="legendDiv"></div>
        </div>
      </div>
    </div>

    

  </div>

  <!-- /.calcite-panels -->

  <script src="moment.js"></script>


<script src="awesomplete.js" async></script>


  <script type="text/javascript">
    var dojoConfig = {
      packages: [{
        name: "bootstrap",
        location: "https://esri.github.io/calcite-maps/dist/vendor/dojo-bootstrap"
      },
      {
        name: "calcite-maps",
        location: "https://esri.github.io/calcite-maps/dist/js/dojo"
        
      }]
    };
  </script>

  <!-- ArcGIS JS 4 -->
  <script src="https://js.arcgis.com/4.13/"></script>

  <script src="map.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</body>
</html>